(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4122],{47571:function(e,t,r){Promise.resolve().then(r.bind(r,60073))},33145:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(48461),a=r.n(s)},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(72972),a=r.n(s)},99376:function(e,t,r){"use strict";var s=r(35475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},48461:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return i},getImageProps:function(){return c}});let s=r(47043),a=r(55346),n=r(65878),l=s._(r(5084));function c(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let i=n.Image},90178:function(e,t,r){"use strict";r.d(t,{w_:function(){return i}});var s=r(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(a),l=function(){return(l=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},c=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};function i(e){return function(t){return s.createElement(o,l({attr:l({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return s.createElement(t.tag,l({key:r},t.attr),e(t.child))})}(e.child))}}function o(e){var t=function(t){var r,a=e.attr,n=e.size,i=e.title,o=c(e,["attr","size","title"]),d=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,o,{className:r,style:l(l({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&s.createElement("title",null,i),e.children)};return void 0!==n?s.createElement(n.Consumer,null,function(e){return t(e)}):t(a)}},60073:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var s=r(57437),a=r(27648),n=r(2265),l=r(99376),c=r(21469),i=r(83626);function o(e){let{productName:t,onClose:r,onConfirm:a}=e,[l,i]=(0,n.useState)(!1),o=async()=>{i(!0),a()};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(c.Ybf,{className:"h-6 w-6 text-red-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Product"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),(0,s.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",(0,s.jsxs)("strong",{className:"text-gray-900",children:['"',t,'"']}),"? The product will be permanently removed from your store."]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)("button",{onClick:r,disabled:l,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:o,disabled:l,className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2",children:l?"Deleting...":"Delete Product"})]})]})})}let d=e=>null==e?"\xa30.00":"\xa3".concat(e.toFixed(2));function u(e){let{initialProducts:t,totalPages:r,currentPage:u,total:x}=e,m=(0,l.useRouter)(),[h,p]=(0,n.useState)(t),[f,g]=(0,n.useState)({show:!1}),[y,b]=(0,n.useState)(""),j=async e=>{try{if(!(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete product");p(t=>t.filter(t=>t._id!==e)),g({show:!1}),alert("Product deleted successfully!"),m.refresh()}catch(e){console.error("Delete error:",e),alert("Failed to delete product. Please try again.")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Products"}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm mt-1",children:["Manage your product inventory (",x," total)"]})]}),(0,s.jsxs)(a.default,{href:"/admin/products/create",className:"bg-indigo-600 text-white px-4 py-2.5 rounded-lg hover:bg-indigo-700 flex items-center gap-2 transition-colors font-medium",children:[(0,s.jsx)(c.OvN,{className:"h-5 w-5"}),"Add Product"]})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y.trim()?m.push("/admin/products?search=".concat(encodeURIComponent(y))):m.push("/admin/products")},className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(c.jRj,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),placeholder:"Search products by name or description...",className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsx)("button",{type:"submit",className:"px-6 py-2.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors font-medium",children:"Search"})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Product"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Brand"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Stock"}),(0,s.jsx)("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[h.map(e=>{var t,r,n,l;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"h-16 w-16 relative rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:(null===(r=e.images)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.public_id)?(0,s.jsx)(i.Z,{publicId:e.images[0].public_id,alt:e.name,width:64,height:64,className:"object-cover h-full w-full"}):(0,s.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-xs",children:"No Image"})}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["/",e.slug]})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(null===(n=e.brand)||void 0===n?void 0:n.name)||(0,s.jsx)("span",{className:"text-gray-400",children:"—"})}),(0,s.jsx)("td",{className:"px-6 py-4 text-gray-700",children:(null===(l=e.category)||void 0===l?void 0:l.name)||(0,s.jsx)("span",{className:"text-gray-400",children:"—"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:d(e.price)})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.stock>10?"bg-green-100 text-green-800":e.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.stock>0?"".concat(e.stock," in stock"):"Out of stock"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(a.default,{href:"/products/".concat(e.slug),target:"_blank",className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",title:"View on website",children:(0,s.jsx)(c.rDJ,{className:"h-5 w-5"})}),(0,s.jsx)(a.default,{href:"/admin/products/".concat(e._id),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit product",children:(0,s.jsx)(c.IYd,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>g({show:!0,product:e}),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete product",children:(0,s.jsx)(c.Ybf,{className:"h-5 w-5"})})]})})]},e._id)}),0===h.length&&(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:6,className:"px-6 py-12 text-center",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"No products found."}),(0,s.jsx)(a.default,{href:"/admin/products/create",className:"text-indigo-600 hover:text-indigo-700 font-medium mt-2 inline-block",children:"Create your first product"})]})})]})]})}),r>1&&(0,s.jsx)("div",{className:"border-t border-gray-100 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Page ",u," of ",r]}),(0,s.jsx)("div",{className:"flex gap-2",children:Array.from({length:r},(e,t)=>t+1).map(e=>(0,s.jsx)(a.default,{href:"/admin/products?page=".concat(e),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-colors ".concat(e===u?"bg-indigo-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"),children:e},e))})]})})]}),f.show&&f.product&&(0,s.jsx)(o,{productName:f.product.name,productId:f.product._id,onClose:()=>g({show:!1}),onConfirm:()=>j(f.product._id)})]})}},83626:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var s=r(57437),a=r(33145);let n="dqzpqza20";function l(e,t){let{width:r,height:s,crop:a="fill",blur:l,quality:c="auto",format:i="auto"}=t;if(!n)return"";let o=[];a&&o.push("c_".concat(a)),r&&o.push("w_".concat(r)),s&&o.push("h_".concat(s)),c&&o.push("q_".concat(c)),i&&o.push("f_".concat(i)),l&&o.push("e_blur:".concat(l));let d=o.join(",");return"https://res.cloudinary.com/".concat(n,"/image/upload/").concat(d,"/").concat(e)}var c=e=>{let{publicId:t,alt:r,width:n,height:c,sizes:i="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px",className:o,crop:d="fill"}=e,u=l(t,{width:n,height:c,crop:d,quality:"auto",format:"auto"}),x=l(t,{width:20,height:20,crop:d,blur:200,quality:"auto",format:"auto"});return(0,s.jsx)(a.default,{src:u,alt:r,width:n,height:c,sizes:i,className:o,placeholder:"blur",blurDataURL:x,loading:"lazy"})}}},function(e){e.O(0,[2502,2972,5878,2971,2117,1744],function(){return e(e.s=47571)}),_N_E=e.O()}]);