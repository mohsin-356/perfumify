exports.id=8917,exports.ids=[8917],exports.modules={14348:(e,r,t)=>{Promise.resolve().then(t.bind(t,51063))},76391:(e,r,t)=>{Promise.resolve().then(t.bind(t,11796))},44597:(e,r,t)=>{"use strict";t.d(r,{default:()=>s.a});var a=t(91561),s=t.n(a)},34178:(e,r,t)=>{"use strict";var a=t(25289);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},91561:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return l},getImageProps:function(){return o}});let a=t(20352),s=t(44401),n=t(15889),i=a._(t(99857));function o(e){let{props:r}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let l=n.Image},51063:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var a=t(97247),s=t(28964),n=t(26529),i=t(29545),o=t(79906),l=t(34178),d=t(84180);let c=[{name:"Dashboard",href:"/admin/dashboard",icon:d.m6D},{name:"Products",href:"/admin/products",icon:d.Wpg},{name:"Categories",href:"/admin/categories",icon:d.aCJ},{name:"Brands",href:"/admin/brands",icon:d.E25},{name:"Orders",href:"/admin/orders",icon:d.x8h},{name:"Customers",href:"/admin/customers",icon:d.WY8},{name:"Leads",href:"/admin/leads",icon:d.zy7},{name:"Subscriptions",href:"/admin/subscriptions",icon:d.Imn},{name:"Reviews",href:"/admin/reviews",icon:d.nae},{name:"Chats",href:"/admin/chats",icon:d.IC0},{name:"Settings",href:"/admin/settings",icon:d.nbt}];function u(){let e=(0,l.usePathname)()??"";return(0,a.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col fixed left-0 top-0 bottom-0 z-50",children:[a.jsx("div",{className:"h-16 flex items-center px-6 border-b border-gray-200",children:a.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Perfumify Admin"})}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:a.jsx("ul",{className:"space-y-1 px-3",children:c.map(r=>{let t=e===r.href||e.startsWith(`${r.href}/`);return a.jsx("li",{children:(0,a.jsxs)(o.default,{href:r.href,className:`flex items-center px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${t?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[a.jsx(r.icon,{className:`mr-3 h-5 w-5 ${t?"text-gray-900":"text-gray-400"}`}),r.name]})},r.name)})})}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,a.jsxs)("button",{className:"flex items-center w-full px-3 py-2.5 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[a.jsx(d.xqh,{className:"mr-3 h-5 w-5 text-gray-400"}),"Logout"]})})]})}function m(){return(0,a.jsxs)("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-40 ml-64",children:[a.jsx("div",{className:"flex items-center w-96",children:(0,a.jsxs)("div",{className:"relative w-full",children:[a.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(d.jRj,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Search..."})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[a.jsx(d.vWP,{className:"h-6 w-6"}),a.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:"A"}),a.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Admin User"})]})]})]})}function h({children:e}){return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 font-sans",children:[a.jsx(u,{}),a.jsx(m,{}),a.jsx("main",{className:"ml-64 p-8",children:e})]})}function f({children:e}){let r=(0,s.useRef)();return r.current||(r.current=new n.QueryClient({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1}}})),a.jsx(n.QueryClientProvider,{client:r.current,children:a.jsx(i.DA,{children:a.jsx(h,{children:e})})})}},11796:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var a=t(97247),s=t(28964),n=t(34178),i=t(2704),o=t(84180),l=t(86451);function d({initialData:e,categories:r}){let t=(0,n.useRouter)(),[d,c]=(0,s.useState)(!1),[u,m]=(0,s.useState)(e?.image||null),[h,f]=(0,s.useState)(!1),{register:g,handleSubmit:x,formState:{errors:p}}=(0,i.cI)({defaultValues:e||{}}),y=async e=>{let r=e.target.files?.[0];if(!r)return;f(!0);let t=new FormData;t.append("file",r);try{let e=await fetch("/api/upload",{method:"POST",body:t}),r=await e.json();if(!e.ok)throw Error(r.error||"Image upload failed");(r.secure_url||r.url)&&m({url:r.secure_url||r.url,public_id:r.public_id})}catch(e){console.error("Upload failed",e),alert("Image upload failed")}finally{f(!1)}},b=async r=>{c(!0);try{let a={...r,image:u,parent:r.parent||null},s=e?`/api/categories/${e._id}`:"/api/categories";if(!(await fetch(s,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to save category");t.push("/admin/categories"),t.refresh()}catch(e){console.error(e),alert("Failed to save category")}finally{c(!1)}};return(0,a.jsxs)("form",{onSubmit:x(b),className:"space-y-8 bg-white p-8 rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Category Name"}),a.jsx("input",{...g("name",{required:"Name is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g. Men's Perfume"}),p.name&&a.jsx("p",{className:"text-red-500 text-xs",children:p.name.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Parent Category"}),(0,a.jsxs)("select",{...g("parent"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white",children:[a.jsx("option",{value:"",children:"None (Top Level)"}),r.filter(r=>r._id!==e?._id).map(e=>a.jsx("option",{value:e._id,children:e.name},e._id))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{...g("description"),rows:4,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Category description..."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Image"}),a.jsx("div",{className:"flex items-center gap-4",children:u?(0,a.jsxs)("div",{className:"relative h-24 w-24 rounded-lg overflow-hidden border border-gray-200 group",children:[a.jsx(l.Z,{publicId:u.public_id,alt:"Category Image",width:96,height:96,className:"object-cover h-full w-full"}),a.jsx("button",{type:"button",onClick:()=>m(null),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(o.q5L,{className:"h-3 w-3"})})]}):(0,a.jsxs)("label",{className:"h-24 w-24 flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 hover:bg-indigo-50 transition-all",children:[h?a.jsx(o.dAq,{className:"h-6 w-6 text-indigo-600 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.Yjd,{className:"h-6 w-6 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Upload"})]}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:y,disabled:h})]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end pt-6 border-t border-gray-100",children:[a.jsx("button",{type:"button",onClick:()=>t.back(),className:"mr-4 px-6 py-2.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors font-medium",children:"Cancel"}),(0,a.jsxs)("button",{type:"submit",disabled:d||h,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors font-medium flex items-center gap-2",children:[d&&a.jsx(o.dAq,{className:"animate-spin"}),d?"Saving...":e?"Update Category":"Create Category"]})]})]})}},86451:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var a=t(97247),s=t(44597);let n="dqzpqza20";function i(e,{width:r,height:t,crop:a="fill",blur:s,quality:i="auto",format:o="auto"}){if(!n)return"";let l=[];a&&l.push(`c_${a}`),r&&l.push(`w_${r}`),t&&l.push(`h_${t}`),i&&l.push(`q_${i}`),o&&l.push(`f_${o}`),s&&l.push(`e_blur:${s}`);let d=l.join(",");return`https://res.cloudinary.com/${n}/image/upload/${d}/${e}`}let o=({publicId:e,alt:r,width:t,height:n,sizes:o="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px",className:l,crop:d="fill"})=>{let c=i(e,{width:t,height:n,crop:d,quality:"auto",format:"auto"}),u=i(e,{width:20,height:20,crop:d,blur:200,quality:"auto",format:"auto"});return a.jsx(s.default,{src:c,alt:r,width:t,height:n,sizes:o,className:l,placeholder:"blur",blurDataURL:u,loading:"lazy"})}},59964:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(45347).createProxy)(String.raw`C:\Users\SMART TECH\Desktop\perfumeStore\src\app\admin\layout.tsx#default`)},1903:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});let a=(0,t(45347).createProxy)(String.raw`C:\Users\SMART TECH\Desktop\perfumeStore\src\components\admin\CategoryForm.tsx#default`)},48948:(e,r,t)=>{"use strict";t.d(r,{u:()=>i});var a=t(11185),s=t.n(a),n=t(61866);async function i(){let e=n.O.MONGODB_URI;if(s().connection?.readyState===1&&e)try{let r=e.match(/@([^/]+)/),t=r?.[1]||"",a=s().connection?.host||"";t&&a&&!a.includes(t)&&(await s().disconnect(),global._mongooseConnection=void 0)}catch{}if(!global._mongooseConnection){if(!n.O.MONGODB_URI)throw Error("MONGODB_URI is not defined in environment variables");let e=n.O.MONGODB_URI;global._mongooseConnection=s().connect(e,{autoIndex:!0}).catch(e=>{throw console.error("MongoDB connection failed:",e?.message),e})}return global._mongooseConnection}},61866:(e,r,t)=>{"use strict";t.d(r,{O:()=>n});var a=t(13305);let s=a.Ryn({NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME:a.Z_8().min(1),NEXT_PUBLIC_CLOUDINARY_API_KEY:a.Z_8().min(1),NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET:a.Z_8().min(1).default("perfume_store"),CLOUDINARY_API_SECRET:a.Z_8().optional(),MONGODB_URI:a.Z_8().optional(),ADMIN_SECRET_TOKEN:a.Z_8().optional(),SMTP_HOST:a.Z_8().optional(),SMTP_PORT:a.oQ2.number().optional(),SMTP_USER:a.Z_8().optional(),SMTP_PASS:a.Z_8().optional(),NOTIFY_EMAIL:a.Z_8().optional()}).safeParse(process.env);if(!s.success)throw console.error("❌ Invalid environment variables:",s.error.flatten().fieldErrors),Error("Invalid environment variables – check .env");let n=s.success?s.data:{}}};