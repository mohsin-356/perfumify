exports.id=3268,exports.ids=[3268],exports.modules={14348:(e,t,r)=>{Promise.resolve().then(r.bind(r,51063))},3467:(e,t,r)=>{Promise.resolve().then(r.bind(r,36455))},44597:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var s=r(91561),n=r.n(s)},34178:(e,t,r)=>{"use strict";var s=r(25289);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},91561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return i},getImageProps:function(){return l}});let s=r(20352),n=r(44401),a=r(15889),o=s._(r(99857));function l(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let i=a.Image},51063:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(97247),n=r(28964),a=r(26529),o=r(29545),l=r(79906),i=r(34178),d=r(84180);let c=[{name:"Dashboard",href:"/admin/dashboard",icon:d.m6D},{name:"Products",href:"/admin/products",icon:d.Wpg},{name:"Categories",href:"/admin/categories",icon:d.aCJ},{name:"Brands",href:"/admin/brands",icon:d.E25},{name:"Orders",href:"/admin/orders",icon:d.x8h},{name:"Customers",href:"/admin/customers",icon:d.WY8},{name:"Leads",href:"/admin/leads",icon:d.zy7},{name:"Subscriptions",href:"/admin/subscriptions",icon:d.Imn},{name:"Reviews",href:"/admin/reviews",icon:d.nae},{name:"Chats",href:"/admin/chats",icon:d.IC0},{name:"Settings",href:"/admin/settings",icon:d.nbt}];function u(){let e=(0,i.usePathname)()??"";return(0,s.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col fixed left-0 top-0 bottom-0 z-50",children:[s.jsx("div",{className:"h-16 flex items-center px-6 border-b border-gray-200",children:s.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Perfumify Admin"})}),s.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:s.jsx("ul",{className:"space-y-1 px-3",children:c.map(t=>{let r=e===t.href||e.startsWith(`${t.href}/`);return s.jsx("li",{children:(0,s.jsxs)(l.default,{href:t.href,className:`flex items-center px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${r?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(t.icon,{className:`mr-3 h-5 w-5 ${r?"text-gray-900":"text-gray-400"}`}),t.name]})},t.name)})})}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,s.jsxs)("button",{className:"flex items-center w-full px-3 py-2.5 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[s.jsx(d.xqh,{className:"mr-3 h-5 w-5 text-gray-400"}),"Logout"]})})]})}function m(){return(0,s.jsxs)("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-40 ml-64",children:[s.jsx("div",{className:"flex items-center w-96",children:(0,s.jsxs)("div",{className:"relative w-full",children:[s.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(d.jRj,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Search..."})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[s.jsx(d.vWP,{className:"h-6 w-6"}),s.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:"A"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Admin User"})]})]})]})}function p({children:e}){return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 font-sans",children:[s.jsx(u,{}),s.jsx(m,{}),s.jsx("main",{className:"ml-64 p-8",children:e})]})}function x({children:e}){let t=(0,n.useRef)();return t.current||(t.current=new a.QueryClient({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1}}})),s.jsx(a.QueryClientProvider,{client:t.current,children:s.jsx(o.DA,{children:s.jsx(p,{children:e})})})}},36455:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(97247),n=r(28964),a=r(34178),o=r(2704),l=r(84180);function i({value:e,onChange:t}){let a=(0,n.useRef)(null),o=(0,n.useRef)(null),l=()=>{let e=window.getSelection();e&&o.current&&(a.current?.focus(),e.removeAllRanges(),e.addRange(o.current))},i=(e,r)=>{if(!a.current)return;l();let s=a.current.innerHTML,n=!1;try{n=document.execCommand(e,!1,r)}catch{}let o=a.current.innerHTML;n||s!==o||x(e,r),t(a.current.innerHTML)},d=(e,t)=>{e.preventDefault();let r=window.getSelection();if(r&&r.rangeCount>0){let e=r.getRangeAt(0),t=e.commonAncestorContainer,s=t?.nodeType===1?t:t?.parentElement;a.current&&s&&a.current.contains(s)&&(o.current=e)}t()},c=e=>{if(!a.current)return;l();let r=e.toUpperCase(),s=e.toLowerCase();try{document.execCommand("formatBlock",!1,r)}catch{}try{document.execCommand("formatBlock",!1,`<${s}>`)}catch{}t(a.current.innerHTML)},u=()=>{let e=window.getSelection();if(!e||0===e.rangeCount)return o.current;let t=e.getRangeAt(0),r=t.commonAncestorContainer,s=r?.nodeType===1?r:r?.parentElement;return a.current&&s&&a.current.contains(s)?t:o.current},m=e=>{try{document.execCommand("insertHTML",!1,e)}catch{}},p=(e,t)=>{let r=u();if(!r)return;let s=r.cloneContents(),n=document.createElement("div");n.appendChild(s);let a=n.innerHTML||r.toString();m(`${e}${a||""}${t}`)},x=(e,t)=>{if(a.current)switch(e){case"underline":p('<span style="text-decoration: underline;">',"</span>");break;case"italic":p("<em>","</em>");break;case"bold":p("<strong>","</strong>");break;case"insertUnorderedList":p("<ul><li>","</li></ul>");break;case"insertOrderedList":p("<ol><li>","</li></ol>");break;case"justifyLeft":case"justifyCenter":case"justifyRight":case"justifyFull":p(`<div style="text-align:${{justifyLeft:"left",justifyCenter:"center",justifyRight:"right",justifyFull:"justify"}[e]};">`,"</div>");break;case"formatBlock":{let e=String(t||"p").replace(/[<>]/g,"");p(`<${e}>`,`</${e}>`)}}},g=e=>{i({left:"justifyLeft",center:"justifyCenter",right:"justifyRight",full:"justifyFull"}[e])},h=e=>{a.current&&(l(),document.execCommand("hiliteColor",!1,e),document.execCommand("backColor",!1,e),t(a.current.innerHTML))},f=()=>{if(!a.current)return;l();let e=window.prompt("Enter URL","https://");if(e)try{let r=new URL(e,window.location.href);document.execCommand("createLink",!1,r.toString());let s=window.getSelection();if(s&&s.rangeCount>0){let e=s.getRangeAt(0).commonAncestorContainer,t=1===e.nodeType?e:e.parentElement;t&&t.querySelectorAll("a").forEach(e=>{e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer nofollow")})}t(a.current.innerHTML)}catch{}};function b(e){let t=new Set(["p","br","strong","b","em","i","u","ul","ol","li","h1","h2","h3","blockquote","a","span"]),r=new DOMParser().parseFromString(e,"text/html"),s=e=>{if(e.nodeType===Node.ELEMENT_NODE){let s=e.tagName.toLowerCase();if(!t.has(s)){let t=r.createTextNode(e.textContent||"");e.parentNode?.replaceChild(t,e);return}for(let t of Array.from(e.attributes)){let r=t.name.toLowerCase();if("a"===s&&"href"===r){let t=e.getAttribute("href")||"";/^(https?:|mailto:|tel:)/i.test(t)||e.removeAttribute("href");continue}if("span"===s&&"style"===r){let t=(e.getAttribute("style")||"").split(";").map(e=>e.trim()).filter(e=>/^(color|background-color)\s*:/i.test(e)).join("; ");t?e.setAttribute("style",t):e.removeAttribute("style");continue}e.removeAttribute(r)}}for(let t of Array.from(e.childNodes))s(t)};return Array.from(r.body.childNodes).forEach(s),r.body.innerHTML}let y=async e=>{if(!a.current)return;let s=e.clipboardData.getData("text/html"),n=e.clipboardData.getData("text/plain");if(!s&&!n)return;e.preventDefault();let o=n;if(s)try{let e=await r.e(3211).then(r.bind(r,73211)).catch(()=>null),t=e?.default??e;o=t?.sanitize?t.sanitize(s,{ALLOWED_TAGS:["p","br","strong","b","em","i","u","ul","ol","li","h1","h2","h3","blockquote","a","span"],ALLOWED_ATTR:{a:["href","target","rel"],span:["style"]},ADD_ATTR:["style"],FORBID_TAGS:["script","style"]}):b(s)}catch{o=b(s)}l(),document.execCommand("insertHTML",!1,o||n),t(a.current.innerHTML)};return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>i("bold")),children:"B"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded italic",onMouseDown:e=>d(e,()=>i("italic")),children:"I"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded underline",onMouseDown:e=>d(e,()=>i("underline")),children:"U"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>i("insertUnorderedList")),children:"• List"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>i("insertOrderedList")),children:"1. List"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>c("H1")),children:"H1"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>c("H2")),children:"H2"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>c("BLOCKQUOTE")),children:"❝ Quote"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>f()),children:"Link"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>i("unlink")),children:"Unlink"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>g("left")),children:"⬅"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>g("center")),children:"⬌"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>g("right")),children:"➡"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>g("full")),children:"▤"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>i("undo")),children:"Undo"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>i("redo")),children:"Redo"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>i("removeFormat")),children:"Clear"}),s.jsx("button",{type:"button",className:"px-2 py-1 border rounded",onMouseDown:e=>d(e,()=>h("#fff59d")),children:"Highlight"})]}),s.jsx("div",{ref:a,contentEditable:!0,suppressContentEditableWarning:!0,dir:"ltr",spellCheck:!0,tabIndex:0,className:"min-h-[160px] w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none outline-none text-left whitespace-pre-wrap",onInput:e=>t(e.target.innerHTML),onPaste:y,onKeyDown:e=>{if(a.current&&(e.ctrlKey||e.metaKey)){let t=e.key.toLowerCase();"b"===t&&(e.preventDefault(),i("bold")),"i"===t&&(e.preventDefault(),i("italic")),"u"===t&&(e.preventDefault(),i("underline")),"y"===t&&(e.preventDefault(),i("redo"))}},onMouseUp:()=>{let e=window.getSelection();e&&e.rangeCount>0&&(o.current=e.getRangeAt(0))},onKeyUp:()=>{let e=window.getSelection();e&&e.rangeCount>0&&(o.current=e.getRangeAt(0))}})]})}var d=r(86451);function c({initialData:e,brands:t=[],categories:r=[]}){let c=(0,a.useRouter)(),[u,m]=(0,n.useState)(!1),[p,x]=(0,n.useState)(e?.images||[]),[g,h]=(0,n.useState)(!1),[f,b]=(0,n.useState)(0),{register:y,handleSubmit:j,formState:{errors:N},setValue:w,watch:v}=(0,o.cI)({defaultValues:{name:e?.name||"",slug:e?.slug||"",description:e?.description||"",shipping_policy:e?.shipping_policy||"",refund_policy:e?.refund_policy||"",sale_price:e?.sale_price||void 0,price:e?.price||0,stock:e?.stock||0,brand:e?.brand?._id||e?.brand||"",category:e?.category?._id||e?.category||"",categories:[],gender:e?.gender||"unisex",sku:e?.sku||"",weight:e?.weight||"",bestSeller:e?.bestSeller||!1,newArrival:e?.newArrival||!1,featured:e?.featured||!1}});v("name");let _=async e=>{let t=e.target.files;if(t?.length){h(!0),b(0);try{let e=t.length,r=0;for(let s=0;s<t.length;s++){let n=t[s],a=new FormData;a.append("file",n);let o=await fetch("/api/upload",{method:"POST",body:a}),l=await o.json();if(!o.ok)throw console.error("Upload failed response:",l),Error(l?.error||"Image upload failed");(l.secure_url||l.url)&&(x(e=>[...e,{url:l.secure_url||l.url,public_id:l.public_id,width:l.width,height:l.height}]),r++,b(Math.round(r/e*100)))}}catch(e){console.error("Upload failed:",e),alert("Image upload failed. Please try again.")}finally{h(!1),b(0)}}},C=e=>{x(t=>t.filter((t,r)=>r!==e))},S=async t=>{if(0===p.length){alert("Please upload at least one product image");return}m(!0);try{let r={name:t.name,slug:t.slug,description:t.description,shipping_policy:t.shipping_policy,refund_policy:t.refund_policy,sale_price:t.sale_price?parseFloat(t.sale_price):void 0,price:parseFloat(t.price),stock:parseInt(t.stock)||0,brand:t.brand||null,category:t.category||null,categories:Array.isArray(t.categories)?t.categories:[],gender:t.gender||"unisex",sku:t.sku||void 0,weight:t.weight?parseFloat(t.weight):void 0,bestSeller:t.bestSeller??!1,newArrival:t.newArrival??!1,featured:t.featured??!1,images:p},s=e?`/api/products/${e._id}`:"/api/products",n=await fetch(s,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),a=await n.json();if(!n.ok)throw Error(a.error||"Failed to save product");alert(e?"Product updated successfully!":"Product created successfully!"),c.push("/admin/products"),c.refresh()}catch(e){console.error("Save error:",e),alert(e.message||"Failed to save product. Please try again.")}finally{m(!1)}};return(0,s.jsxs)("form",{onSubmit:j(S),className:"space-y-8 bg-white p-8 rounded-xl shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Basic Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Product Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{...y("name",{required:"Name is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g. Chanel No. 5"}),N.name&&s.jsx("p",{className:"text-red-500 text-xs",children:N.name.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Slug ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{...y("slug",{required:"Slug is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g. chanel-no-5"}),N.slug&&s.jsx("p",{className:"text-red-500 text-xs",children:N.slug.message})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Description"}),s.jsx(i,{value:v("description"),onChange:e=>w("description",e,{shouldDirty:!0})})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Shipping Policy"}),s.jsx(i,{value:v("shipping_policy"),onChange:e=>w("shipping_policy",e,{shouldDirty:!0})})]}),(0,s.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Refund Policy"}),s.jsx(i,{value:v("refund_policy"),onChange:e=>w("refund_policy",e,{shouldDirty:!0})})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Pricing & Inventory"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Price (\xa3) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",step:"0.01",...y("price",{required:"Price is required",min:0}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),N.price&&s.jsx("p",{className:"text-red-500 text-xs",children:N.price.message})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Sale Price (\xa3)"}),s.jsx("input",{type:"number",step:"0.01",...y("sale_price"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Leave empty if not on sale."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Stock"}),s.jsx("input",{type:"number",...y("stock",{min:0}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"SKU"}),s.jsx("input",{...y("sku"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g. CH-001"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Homepage Badges"}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",...y("bestSeller"),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),"Best Seller"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",...y("newArrival"),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),"New Arrival"]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[s.jsx("input",{type:"checkbox",...y("featured"),className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),"Featured"]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:"Classification"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Brand"}),(0,s.jsxs)("select",{...y("brand"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white",children:[s.jsx("option",{value:"",children:"Select Brand"}),t&&t.length>0?t.map(e=>s.jsx("option",{value:e._id,children:e.name},e._id)):s.jsx("option",{value:"",disabled:!0,children:"No brands available"})]}),t&&0===t.length&&s.jsx("p",{className:"text-amber-600 text-xs",children:"No brands found. Please create a brand first."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Category"}),(0,s.jsxs)("select",{...y("category"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white",children:[s.jsx("option",{value:"",children:"Select Category"}),r&&r.length>0?r.map(e=>s.jsx("option",{value:e._id,children:e.name},e._id)):s.jsx("option",{value:"",disabled:!0,children:"No categories available"})]}),r&&0===r.length&&s.jsx("p",{className:"text-amber-600 text-xs",children:"No categories found. Please create a category first."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Additional Categories"}),s.jsx("select",{multiple:!0,...y("categories"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white min-h-[120px]",children:r&&r.length>0?r.map(e=>s.jsx("option",{value:e._id,children:e.name},e._id)):s.jsx("option",{value:"",disabled:!0,children:"No categories available"})}),s.jsx("p",{className:"text-xs text-gray-500",children:"Hold Ctrl/Cmd to select multiple."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Gender"}),(0,s.jsxs)("select",{...y("gender"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white",children:[s.jsx("option",{value:"unisex",children:"Unisex"}),s.jsx("option",{value:"men",children:"Men"}),s.jsx("option",{value:"women",children:"Women"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Weight (g)"}),s.jsx("input",{type:"number",step:"0.1",...y("weight"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"e.g. 100"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 border-b pb-2",children:["Product Images ",s.jsx("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[p.map((e,t)=>(0,s.jsxs)("div",{className:"relative h-32 w-32 rounded-lg overflow-hidden border-2 border-gray-200 group hover:border-indigo-400 transition-all",children:[s.jsx(d.Z,{publicId:e.public_id,alt:`Product ${t+1}`,width:128,height:128,className:"object-cover h-full w-full"}),s.jsx("button",{type:"button",onClick:()=>C(t),className:"absolute top-2 right-2 bg-red-500 text-white p-1.5 rounded-full opacity-0 group-hover:opacity-100 transition-opacity shadow-lg hover:bg-red-600",children:s.jsx(l.q5L,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity",children:["Image ",t+1]})]},t)),(0,s.jsxs)("label",{className:"h-32 w-32 flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg cursor-pointer hover:border-indigo-500 hover:bg-indigo-50 transition-all",children:[g?(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[s.jsx(l.dAq,{className:"h-8 w-8 text-indigo-600 animate-spin"}),(0,s.jsxs)("span",{className:"text-xs text-indigo-600 mt-2",children:[f,"%"]})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Yjd,{className:"h-8 w-8 text-gray-400"}),s.jsx("span",{className:"text-xs text-gray-500 mt-2",children:"Upload"}),s.jsx("span",{className:"text-xs text-gray-400",children:"Multiple OK"})]}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:_,disabled:g})]})]}),0===p.length&&s.jsx("p",{className:"text-amber-600 text-sm",children:"Please upload at least one product image"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-100",children:[s.jsx("button",{type:"button",onClick:()=>c.back(),className:"px-6 py-2.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors font-medium",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:u||g,className:"px-6 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:[u&&s.jsx(l.dAq,{className:"animate-spin"}),u?"Saving...":e?"Update Product":"Create Product"]})]})]})}},86451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(97247),n=r(44597);let a="dqzpqza20";function o(e,{width:t,height:r,crop:s="fill",blur:n,quality:o="auto",format:l="auto"}){if(!a)return"";let i=[];s&&i.push(`c_${s}`),t&&i.push(`w_${t}`),r&&i.push(`h_${r}`),o&&i.push(`q_${o}`),l&&i.push(`f_${l}`),n&&i.push(`e_blur:${n}`);let d=i.join(",");return`https://res.cloudinary.com/${a}/image/upload/${d}/${e}`}let l=({publicId:e,alt:t,width:r,height:a,sizes:l="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px",className:i,crop:d="fill"})=>{let c=o(e,{width:r,height:a,crop:d,quality:"auto",format:"auto"}),u=o(e,{width:20,height:20,crop:d,blur:200,quality:"auto",format:"auto"});return s.jsx(n.default,{src:c,alt:t,width:r,height:a,sizes:l,className:i,placeholder:"blur",blurDataURL:u,loading:"lazy"})}},59964:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`C:\Users\SMART TECH\Desktop\perfumeStore\src\app\admin\layout.tsx#default`)},6230:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(45347).createProxy)(String.raw`C:\Users\SMART TECH\Desktop\perfumeStore\src\components\admin\ProductForm.tsx#default`)},48948:(e,t,r)=>{"use strict";r.d(t,{u:()=>o});var s=r(11185),n=r.n(s),a=r(61866);async function o(){let e=a.O.MONGODB_URI;if(n().connection?.readyState===1&&e)try{let t=e.match(/@([^/]+)/),r=t?.[1]||"",s=n().connection?.host||"";r&&s&&!s.includes(r)&&(await n().disconnect(),global._mongooseConnection=void 0)}catch{}if(!global._mongooseConnection){if(!a.O.MONGODB_URI)throw Error("MONGODB_URI is not defined in environment variables");let e=a.O.MONGODB_URI;global._mongooseConnection=n().connect(e,{autoIndex:!0}).catch(e=>{throw console.error("MongoDB connection failed:",e?.message),e})}return global._mongooseConnection}},61866:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var s=r(13305);let n=s.Ryn({NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME:s.Z_8().min(1),NEXT_PUBLIC_CLOUDINARY_API_KEY:s.Z_8().min(1),NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET:s.Z_8().min(1).default("perfume_store"),CLOUDINARY_API_SECRET:s.Z_8().optional(),MONGODB_URI:s.Z_8().optional(),ADMIN_SECRET_TOKEN:s.Z_8().optional(),SMTP_HOST:s.Z_8().optional(),SMTP_PORT:s.oQ2.number().optional(),SMTP_USER:s.Z_8().optional(),SMTP_PASS:s.Z_8().optional(),NOTIFY_EMAIL:s.Z_8().optional()}).safeParse(process.env);if(!n.success)throw console.error("❌ Invalid environment variables:",n.error.flatten().fieldErrors),Error("Invalid environment variables – check .env");let a=n.success?n.data:{}}};