(()=>{var e={};e.id=4122,e.ids=[4122],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86571:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(50771),r(59964),r(53733),r(4521),r(90996);var s=r(30170),a=r(45002),n=r(83876),i=r.n(n),o=r(66299),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["admin",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,50771)),"C:\\Users\\SMART TECH\\Desktop\\perfumeStore\\src\\app\\admin\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,59964)),"C:\\Users\\SMART TECH\\Desktop\\perfumeStore\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,53733)),"C:\\Users\\SMART TECH\\Desktop\\perfumeStore\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,4521)),"C:\\Users\\SMART TECH\\Desktop\\perfumeStore\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\SMART TECH\\Desktop\\perfumeStore\\src\\app\\admin\\products\\page.tsx"],u="/admin/products/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/products/page",pathname:"/admin/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},14348:(e,t,r)=>{Promise.resolve().then(r.bind(r,51063))},2362:(e,t,r)=>{Promise.resolve().then(r.bind(r,17667))},44597:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(91561),a=r.n(s)},34178:(e,t,r)=>{"use strict";var s=r(25289);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},91561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return o}});let s=r(20352),a=r(44401),n=r(15889),i=s._(r(99857));function o(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=n.Image},51063:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(97247),a=r(28964),n=r(26529),i=r(29545),o=r(79906),l=r(34178),d=r(84180);let c=[{name:"Dashboard",href:"/admin/dashboard",icon:d.m6D},{name:"Products",href:"/admin/products",icon:d.Wpg},{name:"Categories",href:"/admin/categories",icon:d.aCJ},{name:"Brands",href:"/admin/brands",icon:d.E25},{name:"Orders",href:"/admin/orders",icon:d.x8h},{name:"Customers",href:"/admin/customers",icon:d.WY8},{name:"Leads",href:"/admin/leads",icon:d.zy7},{name:"Subscriptions",href:"/admin/subscriptions",icon:d.Imn},{name:"Reviews",href:"/admin/reviews",icon:d.nae},{name:"Chats",href:"/admin/chats",icon:d.IC0},{name:"Settings",href:"/admin/settings",icon:d.nbt}];function u(){let e=(0,l.usePathname)()??"";return(0,s.jsxs)("aside",{className:"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col fixed left-0 top-0 bottom-0 z-50",children:[s.jsx("div",{className:"h-16 flex items-center px-6 border-b border-gray-200",children:s.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Perfumify Admin"})}),s.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:s.jsx("ul",{className:"space-y-1 px-3",children:c.map(t=>{let r=e===t.href||e.startsWith(`${t.href}/`);return s.jsx("li",{children:(0,s.jsxs)(o.default,{href:t.href,className:`flex items-center px-3 py-2.5 rounded-lg text-sm font-medium transition-colors ${r?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[s.jsx(t.icon,{className:`mr-3 h-5 w-5 ${r?"text-gray-900":"text-gray-400"}`}),t.name]})},t.name)})})}),s.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,s.jsxs)("button",{className:"flex items-center w-full px-3 py-2.5 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[s.jsx(d.xqh,{className:"mr-3 h-5 w-5 text-gray-400"}),"Logout"]})})]})}function m(){return(0,s.jsxs)("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 sticky top-0 z-40 ml-64",children:[s.jsx("div",{className:"flex items-center w-96",children:(0,s.jsxs)("div",{className:"relative w-full",children:[s.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(d.jRj,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Search..."})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{className:"p-2 text-gray-400 hover:text-gray-500 relative",children:[s.jsx(d.vWP,{className:"h-6 w-6"}),s.jsx("span",{className:"absolute top-1.5 right-1.5 block h-2 w-2 rounded-full bg-red-500 ring-2 ring-white"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold",children:"A"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Admin User"})]})]})]})}function x({children:e}){return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 font-sans",children:[s.jsx(u,{}),s.jsx(m,{}),s.jsx("main",{className:"ml-64 p-8",children:e})]})}function p({children:e}){let t=(0,a.useRef)();return t.current||(t.current=new n.QueryClient({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1,retry:1}}})),s.jsx(n.QueryClientProvider,{client:t.current,children:s.jsx(i.DA,{children:s.jsx(x,{children:e})})})}},17667:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(97247),a=r(79906),n=r(28964),i=r(34178),o=r(84180),l=r(86451);function d({productName:e,onClose:t,onConfirm:r}){let[a,i]=(0,n.useState)(!1),l=async()=>{i(!0),r()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[s.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(o.Ybf,{className:"h-6 w-6 text-red-600"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Product"}),s.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),(0,s.jsxs)("p",{className:"text-gray-700 mb-6",children:["Are you sure you want to delete ",(0,s.jsxs)("strong",{className:"text-gray-900",children:['"',e,'"']}),"? The product will be permanently removed from your store."]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:t,disabled:a,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:l,disabled:a,className:"px-4 py-2 bg-red-600 text-white hover:bg-red-700 rounded-lg transition-colors disabled:opacity-50 flex items-center gap-2",children:a?"Deleting...":"Delete Product"})]})]})})}let c=e=>null==e?"\xa30.00":`\xa3${e.toFixed(2)}`;function u({initialProducts:e,totalPages:t,currentPage:r,total:u}){let m=(0,i.useRouter)(),[x,p]=(0,n.useState)(e),[h,g]=(0,n.useState)({show:!1}),[f,y]=(0,n.useState)(""),b=async e=>{try{if(!(await fetch(`/api/products/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete product");p(t=>t.filter(t=>t._id!==e)),g({show:!1}),alert("Product deleted successfully!"),m.refresh()}catch(e){console.error("Delete error:",e),alert("Failed to delete product. Please try again.")}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Products"}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm mt-1",children:["Manage your product inventory (",u," total)"]})]}),(0,s.jsxs)(a.default,{href:"/admin/products/create",className:"bg-indigo-600 text-white px-4 py-2.5 rounded-lg hover:bg-indigo-700 flex items-center gap-2 transition-colors font-medium",children:[s.jsx(o.OvN,{className:"h-5 w-5"}),"Add Product"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f.trim()?m.push(`/admin/products?search=${encodeURIComponent(f)}`):m.push("/admin/products")},className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[s.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(o.jRj,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:f,onChange:e=>y(e.target.value),placeholder:"Search products by name or description...",className:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-lg transition-colors font-medium",children:"Search"})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Product"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Brand"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Category"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Price"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[x.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-16 w-16 relative rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:e.images?.[0]?.public_id?s.jsx(l.Z,{publicId:e.images[0].public_id,alt:e.name,width:64,height:64,className:"object-cover h-full w-full"}):s.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-xs",children:"No Image"})}),(0,s.jsxs)("div",{className:"min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 truncate",children:["/",e.slug]})]})]})}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.brand?.name||s.jsx("span",{className:"text-gray-400",children:"—"})}),s.jsx("td",{className:"px-6 py-4 text-gray-700",children:e.category?.name||s.jsx("span",{className:"text-gray-400",children:"—"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-semibold text-gray-900",children:c(e.price)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.stock>10?"bg-green-100 text-green-800":e.stock>0?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.stock>0?`${e.stock} in stock`:"Out of stock"})}),s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(a.default,{href:`/products/${e.slug}`,target:"_blank",className:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",title:"View on website",children:s.jsx(o.rDJ,{className:"h-5 w-5"})}),s.jsx(a.default,{href:`/admin/products/${e._id}`,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all",title:"Edit product",children:s.jsx(o.IYd,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>g({show:!0,product:e}),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Delete product",children:s.jsx(o.Ybf,{className:"h-5 w-5"})})]})})]},e._id)),0===x.length&&s.jsx("tr",{children:(0,s.jsxs)("td",{colSpan:6,className:"px-6 py-12 text-center",children:[s.jsx("p",{className:"text-gray-500",children:"No products found."}),s.jsx(a.default,{href:"/admin/products/create",className:"text-indigo-600 hover:text-indigo-700 font-medium mt-2 inline-block",children:"Create your first product"})]})})]})]})}),t>1&&s.jsx("div",{className:"border-t border-gray-100 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Page ",r," of ",t]}),s.jsx("div",{className:"flex gap-2",children:Array.from({length:t},(e,t)=>t+1).map(e=>s.jsx(a.default,{href:`/admin/products?page=${e}`,className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e===r?"bg-indigo-600 text-white":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:e},e))})]})})]}),h.show&&h.product&&s.jsx(d,{productName:h.product.name,productId:h.product._id,onClose:()=>g({show:!1}),onConfirm:()=>b(h.product._id)})]})}},86451:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(97247),a=r(44597);let n="dqzpqza20";function i(e,{width:t,height:r,crop:s="fill",blur:a,quality:i="auto",format:o="auto"}){if(!n)return"";let l=[];s&&l.push(`c_${s}`),t&&l.push(`w_${t}`),r&&l.push(`h_${r}`),i&&l.push(`q_${i}`),o&&l.push(`f_${o}`),a&&l.push(`e_blur:${a}`);let d=l.join(",");return`https://res.cloudinary.com/${n}/image/upload/${d}/${e}`}let o=({publicId:e,alt:t,width:r,height:n,sizes:o="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 400px",className:l,crop:d="fill"})=>{let c=i(e,{width:r,height:n,crop:d,quality:"auto",format:"auto"}),u=i(e,{width:20,height:20,crop:d,blur:200,quality:"auto",format:"auto"});return s.jsx(a.default,{src:c,alt:t,width:r,height:n,sizes:o,className:l,placeholder:"blur",blurDataURL:u,loading:"lazy"})}},59964:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`C:\Users\SMART TECH\Desktop\perfumeStore\src\app\admin\layout.tsx#default`)},50771:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,dynamic:()=>o});var s=r(72051),a=r(48948),n=r(1369);let i=(0,r(45347).createProxy)(String.raw`C:\Users\SMART TECH\Desktop\perfumeStore\src\components\admin\ProductsListClient.tsx#default`),o="force-dynamic";async function l(e){try{await (0,a.u)();let t=parseInt(e.page||"1"),r=e.search||"",s={};r&&(s.$or=[{name:{$regex:r,$options:"i"}},{description:{$regex:r,$options:"i"}}]);let i=await n.x.find(s).populate("category","name slug").populate("brand","name slug").sort({createdAt:-1}).skip((t-1)*20).limit(20).lean(),o=await n.x.countDocuments(s);return{products:JSON.parse(JSON.stringify(i)),total:o,totalPages:Math.ceil(o/20),currentPage:t}}catch(e){return console.error("Error fetching products:",e),{products:[],total:0,totalPages:0,currentPage:1}}}async function d({searchParams:e}){let{products:t,total:r,totalPages:a,currentPage:n}=await l(e);return s.jsx(i,{initialProducts:t,totalPages:a,currentPage:n,total:r})}},48948:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});var s=r(11185),a=r.n(s),n=r(61866);async function i(){let e=n.O.MONGODB_URI;if(a().connection?.readyState===1&&e)try{let t=e.match(/@([^/]+)/),r=t?.[1]||"",s=a().connection?.host||"";r&&s&&!s.includes(r)&&(await a().disconnect(),global._mongooseConnection=void 0)}catch{}if(!global._mongooseConnection){if(!n.O.MONGODB_URI)throw Error("MONGODB_URI is not defined in environment variables");let e=n.O.MONGODB_URI;global._mongooseConnection=a().connect(e,{autoIndex:!0}).catch(e=>{throw console.error("MongoDB connection failed:",e?.message),e})}return global._mongooseConnection}},61866:(e,t,r)=>{"use strict";r.d(t,{O:()=>n});var s=r(13305);let a=s.Ryn({NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME:s.Z_8().min(1),NEXT_PUBLIC_CLOUDINARY_API_KEY:s.Z_8().min(1),NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET:s.Z_8().min(1).default("perfume_store"),CLOUDINARY_API_SECRET:s.Z_8().optional(),MONGODB_URI:s.Z_8().optional(),ADMIN_SECRET_TOKEN:s.Z_8().optional(),SMTP_HOST:s.Z_8().optional(),SMTP_PORT:s.oQ2.number().optional(),SMTP_USER:s.Z_8().optional(),SMTP_PASS:s.Z_8().optional(),NOTIFY_EMAIL:s.Z_8().optional()}).safeParse(process.env);if(!a.success)throw console.error("❌ Invalid environment variables:",a.error.flatten().fieldErrors),Error("Invalid environment variables – check .env");let n=a.success?a.data:{}},1369:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});var s=r(11185),a=r.n(s);let n=new s.Schema({url:{type:String,required:!0},public_id:{type:String,required:!0},width:{type:Number},height:{type:Number}},{_id:!1}),i=new s.Schema({name:{type:String,required:!0},slug:{type:String,required:!0,unique:!0},description:{type:String},shipping_policy:{type:String},refund_policy:{type:String},sale_price:{type:Number},price:{type:Number,required:!0},images:{type:[n],default:[]},category:{type:String,required:!0},categories:{type:[String],default:[]},brand:{type:String,required:!0},gender:{type:String,enum:["men","women","unisex"],default:"unisex"},stock:{type:Number,default:0},sku:{type:String,unique:!0,sparse:!0},weight:{type:Number},tags:[String],variations:Object,bestSeller:{type:Boolean,default:!1},newArrival:{type:Boolean,default:!1},featured:{type:Boolean,default:!1}},{timestamps:!0}),o=a().models.Product||a().model("Product",i)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7787,3305,8131,3801,5889,826],()=>r(86571));module.exports=s})();